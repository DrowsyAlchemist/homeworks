using System;

namespace Lessons
{
    class Lessons
    {
        private static void Main()
        {
            string text = "())(()";
            int openingParenthesisCount = 0;
            int closingParenthesisCount = 0;
            int maxDepthOfNesting = 0;
            bool invalidFormat = false;

            for (int i = 0, depthOfNesting = 0; i < text.Length; i++)
            {
                if (text[i] == '(')
                {
                    openingParenthesisCount++;
                    depthOfNesting++;
                }
                else if (text[i] == ')')
                {
                    closingParenthesisCount++;
                    depthOfNesting--;
                }
                if (depthOfNesting > maxDepthOfNesting)
                    maxDepthOfNesting = depthOfNesting;
                if (depthOfNesting < 0)
                    invalidFormat = true;
            }
            if (openingParenthesisCount == closingParenthesisCount && !invalidFormat)
                Console.WriteLine(maxDepthOfNesting);
            else
                Console.WriteLine("Неверный формат строки!");

            Console.ReadKey();
        }
    }
}
